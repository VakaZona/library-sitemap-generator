1) Принципы SOLID проигнорированы в полной мере. Весь функционал свален в один класс. (По хорошему, у нас есть несколько ответственностей, как минимум классы валидации, классы формирования сайтмапов )

2) Не предусмотрено возможностей расширения (Владение ООП) (Не выделено в отдельные классы формирование различных форматов, не используется наследование\использование интерфейсов, возможные варианты, например, расширений не вынесены в отдельные абсракции (константы))

3) Для всех возможных ошибок использовано одно и то же исключение. (По хорошему, у нас есть могут возникнуть разные типы ошибок и мы должны уметь дифференцировать их (например, ошибки связанные с файловой системой - не удалось открыть файл на запиь\ нет прав для записи и тп, ошибки формирования сайтмапов, ошибки валидации ))